<div class="dashboard">
  <app-navbar></app-navbar>
  
  <div class="dashboard-container">
    <div class="welcome-section">
      <h1>Bienvenue, {{ user?.username }} ! ğŸ‰</h1>
      <p class="welcome-message">
        PrÃªt Ã  relever de nouveaux dÃ©fis ? DÃ©couvrez nos quiz interactifs et boostez vos compÃ©tences !
      </p>
    </div>

    <div class="stats-grid">
      <div class="stat-card primary">
        <div class="stat-icon">ğŸ†</div>
        <div class="stat-content">
          <h3>{{ user?.totalPoints || 0 }}</h3>
          <p>Points totaux</p>
        </div>
      </div>

      <div class="stat-card success">
        <div class="stat-icon">âœ…</div>
        <div class="stat-content">
          <h3>{{ user?.completedQuizzes?.length || 0 }}</h3>
          <p>Quiz terminÃ©s</p>
        </div>
      </div>

      <div class="stat-card warning">
        <div class="stat-icon">ğŸ¯</div>
        <div class="stat-content">
          <h3>{{ availableQuizzes.length }}</h3>
          <p>Quiz disponibles</p>
        </div>
      </div>

      <div class="stat-card info">
        <div class="stat-icon">ğŸ…</div>
        <div class="stat-content">
          <h3>{{ user?.badges?.length || 0 }}</h3>
          <p>Badges obtenus</p>
        </div>
      </div>
    </div>

    <div class="dashboard-content">
      <div class="section">
        <h2>ğŸš€ DÃ©marrer un nouveau quiz</h2>
        <p class="section-description">
          Choisissez parmi nos quiz thÃ©matiques et testez vos connaissances !
        </p>
        <button routerLink="/quizzes" class="cta-button">
          Voir tous les quiz
        </button>
      </div>

      <div class="section">
        <h2>ğŸ“Š Vos performances</h2>
        <div class="performance-card">
          <div class="performance-metric">
            <div class="metric-label">Taux de rÃ©ussite moyen</div>
            <div class="metric-value">{{ calculateAverageScore() }}%</div>
          </div>
          <div class="performance-chart">
            <div class="chart-bar" [style.width.%]="calculateAverageScore()"></div>
          </div>
        </div>
      </div>

      <div class="section" *ngIf="user && user.badges && user.badges.length > 0">
        <h2>ğŸ… Vos badges</h2>
        <div class="badges-grid">
          <div *ngFor="let badge of user.badges" class="badge-card">
            <div class="badge-icon">{{ badge.icon }}</div>
            <div class="badge-info">
              <h4>{{ badge.name }}</h4>
              <p>{{ badge.description }}</p>
            </div>
          </div>
        </div>
      </div>

      <div class="section">
        <h2>ğŸ¯ Quiz recommandÃ©s</h2>
        <div class="recommended-quizzes">
          <div *ngFor="let quiz of getRecommendedQuizzes()" class="quiz-card-mini">
            <div class="quiz-theme-badge" [class]="quiz.theme">
              {{ getThemeIcon(quiz.theme) }}
            </div>
            <div class="quiz-info">
              <h4>{{ quiz.title }}</h4>
              <p>{{ quiz.description }}</p>
              <div class="quiz-meta">
                <span class="duration">â±ï¸ {{ quiz.duration }}min</span>
                <span class="points">ğŸ† {{ quiz.points }}pts</span>
              </div>
            </div>
            <button [routerLink]="['/quiz', quiz.id]" class="start-btn">
              Commencer
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
