<div class="result-page">
  <app-navbar></app-navbar>

  <div class="result-container" *ngIf="quiz">
    <!-- Header avec animation -->
    <div class="result-header">
      <div class="celebration-animation">
        <div class="confetti"></div>
        <div class="confetti"></div>
        <div class="confetti"></div>
        <div class="confetti"></div>
        <div class="confetti"></div>
      </div>

      <div class="result-title">
        <h1>üéâ Quiz Termin√© !</h1>
        <p>{{ quiz.title }}</p>
      </div>
    </div>

    <!-- Badge Section -->
    <div class="badge-section" *ngIf="earnedBadges.length > 0">
      <div class="badge-card" *ngFor="let badge of earnedBadges" [style.background]="getBadgeGradient(badge)">
        <div class="badge-icon">{{ badge.icon }}</div>
        <div class="badge-info">
          <h2 class="badge-name">{{ badge.name }}</h2>
          <p class="badge-description">{{ badge.description }}</p>
          <div class="badge-requirement">{{ badge.requirement }}</div>
        </div>
        <div class="badge-shine"></div>
      </div>
    </div>

    <!-- Score Section -->
    <div class="score-section">
      <div class="score-card">
        <div class="score-header">
          <h3> Votre Performance</h3>
        </div>

        <div class="score-display">
          <div class="main-score">
            <div class="score-number">{{ userScore }}</div>
            <div class="score-separator">/</div>
            <div class="score-total">{{ quiz.points }}</div>
          </div>
          <div class="score-label">points</div>
        </div>

        <div class="percentage-display">
          <div class="percentage-circle" [style.background]="getPercentageGradient()">
            <span class="percentage-text">{{ scorePercentage }}%</span>
          </div>
        </div>

        <div class="performance-level">
          <span class="level-label">Niveau de Performance:</span>
          <span class="level-value" [style.color]="getPerformanceColor()">{{ getPerformanceLevel() }}</span>
        </div>
      </div>
    </div>

    <!-- Detailed Results -->
    <div class="details-section">
      <div class="details-card">
        <h3> Analyse D√©taill√©e</h3>

        <div class="stats-grid">
          <div class="stat-item correct">
            <div class="stat-icon">‚úÖ</div>
            <div class="stat-value">{{ correctAnswers }}</div>
            <div class="stat-label">R√©ponses Correctes</div>
          </div>

          <div class="stat-item incorrect">
            <div class="stat-icon">‚ùå</div>
            <div class="stat-value">{{ incorrectAnswers }}</div>
            <div class="stat-label">R√©ponses Incorrectes</div>
          </div>

          <div class="stat-item time">
            <div class="stat-icon">‚è±Ô∏è</div>
            <div class="stat-value">{{ getTimeSpent() }}</div>
            <div class="stat-label">Temps Pass√©</div>
          </div>

          <div class="stat-item accuracy">
            <div class="stat-icon">üéØ</div>
            <div class="stat-value">{{ scorePercentage }}%</div>
            <div class="stat-label">Pr√©cision</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Encouragement Message -->
    <div class="message-section">
      <div class="message-card" [ngClass]="getMessageClass()">
        <div class="message-icon">{{ getMessageIcon() }}</div>
        <div class="message-content">
          <h4>{{ getScoreMessage() }}</h4>
          <p>{{ getEncouragementMessage() }}</p>
        </div>
      </div>
    </div>

    <!-- Actions Section -->
    <div class="actions-section">
    

      <div *ngIf="!isReplayable" class="non-replayable-message">
        <i class="fas fa-info-circle"></i>
        <p>Ce quiz ne peut √™tre effectu√© qu'une seule fois. Vous ne pouvez pas le refaire.</p>
      </div>

      <button (click)="goToQuizzes()" class="action-button back-button">
        <i class="fas fa-list"></i> Voir tous les Quiz
      </button>

      <button (click)="goToDashboard()" class="action-button dashboard-button">
        <i class="fas fa-tachometer-alt"></i> Tableau de bord
      </button>
    </div>
  </div>
</div>